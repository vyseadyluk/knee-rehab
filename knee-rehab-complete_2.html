<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="åº·å¤åŠ©æ‰‹">
    <title>è†ç›–åº·å¤åŠ©æ‰‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 26px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 13px;
            line-height: 1.5;
        }

        .progress-section {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
        }

        .progress-item {
            text-align: center;
        }

        .progress-number {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }

        .progress-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .notification-setup {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .notification-setup button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }

        .notification-setup.enabled {
            background: #d4edda;
        }

        .notification-warning {
            background: #f8d7da;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            color: #721c24;
            font-size: 13px;
            line-height: 1.5;
        }

        .time-settings {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 10px;
        }

        .time-input {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .time-input label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .time-input input {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
        }

        .checkin-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .checkin-btn {
            flex: 1;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .checkin-btn.completed {
            background: linear-gradient(135deg, #52c234 0%, #61b15a 100%);
        }

        .undo-btn {
            flex: 0 0 auto;
            padding: 20px;
            background: #ff9800;
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .undo-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .exercises {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .exercise-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
        }

        .exercise-item.phase1 {
            border-left: 4px solid #ffa726;
        }

        .exercise-item.phase2 {
            border-left: 4px solid #667eea;
        }

        .exercise-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .phase-tag {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: normal;
        }

        .phase-tag.phase1 {
            background: #ffe0b2;
            color: #e65100;
        }

        .phase-tag.phase2 {
            background: #e3f2fd;
            color: #1565c0;
        }

        .exercise-details {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
        }

        .calendar-section {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .month-selector {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .month-selector button {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .month-selector button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .month-title {
            font-weight: bold;
            color: #667eea;
            font-size: 16px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-header {
            text-align: center;
            font-size: 10px;
            color: #999;
            padding: 5px 0;
            font-weight: bold;
        }

        .calendar-day {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        .calendar-day.checked {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .calendar-day.today {
            border-color: #764ba2;
            border-width: 3px;
        }

        .legend {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
            font-size: 12px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .legend-box.phase1 {
            background: #ffa726;
        }

        .legend-box.phase2 {
            background: #667eea;
        }

        .note {
            background: #fff3cd;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            color: #856404;
            margin-top: 15px;
            line-height: 1.5;
        }

        .reset-btn {
            width: 100%;
            padding: 12px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¦µ è†ç›–åº·å¤åŠ©æ‰‹</h1>
        <p class="subtitle">åº·å¤è®­ç»ƒè®¡åˆ’ï¼ˆ180å¤©ï¼‰<br>åšæŒè®­ç»ƒï¼Œæ—©æ—¥æ¢å¤</p>

        <div class="progress-section">
            <div class="progress-info">
                <div class="progress-item">
                    <div class="progress-number" id="dayNumber">1</div>
                    <div class="progress-label">ç¬¬å‡ å¤©</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number" id="totalCheckins">0</div>
                    <div class="progress-label">ç´¯è®¡æ‰“å¡</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number" id="streak">0</div>
                    <div class="progress-label">è¿ç»­å¤©æ•°</div>
                </div>
            </div>
        </div>

        <div class="notification-warning">
            âš ï¸ <strong>iPhoneé€šçŸ¥è¯´æ˜ï¼š</strong><br>
            ç½‘é¡µé€šçŸ¥åœ¨iPhoneä¸Šä¸ç¨³å®šï¼Œå»ºè®®ä½¿ç”¨iPhoneè‡ªå¸¦çš„"æé†’äº‹é¡¹"Appè®¾ç½®æ¯æ—¥é‡å¤æé†’ã€‚
        </div>

        <div class="notification-setup" id="notificationStatus">
            <p>ğŸ”” å°è¯•å¼€å¯æµè§ˆå™¨é€šçŸ¥ï¼ˆç”µè„‘ç«¯æ¨èï¼‰</p>
            <button onclick="enableNotifications()">å¼€å¯é€šçŸ¥</button>
            <div class="time-settings" style="display:flex;" id="timeSettings">
                <div class="time-input">
                    <label>æ—©ä¸Šæé†’</label>
                    <input type="time" id="morningTime" value="08:00">
                </div>
                <div class="time-input">
                    <label>æ™šä¸Šæé†’</label>
                    <input type="time" id="eveningTime" value="19:00">
                </div>
            </div>
        </div>

        <div class="checkin-buttons">
            <button class="checkin-btn" id="checkinBtn" onclick="dailyCheckin()">
                ä»Šæ—¥è®­ç»ƒæ‰“å¡
            </button>
            <button class="undo-btn" id="undoBtn" onclick="undoCheckin()" disabled>
                æ’¤é”€
            </button>
        </div>

        <div class="exercises">
            <h3 style="margin-bottom: 15px; color: #667eea;">ğŸ“‹ åº·å¤è®­ç»ƒè®¡åˆ’</h3>
            
            <div class="exercise-item phase1">
                <div class="exercise-title">
                    <span>1. å•è…¿ç«™ç«‹</span>
                    <span class="phase-tag phase1">ç¬¬1-20å¤©</span>
                </div>
                <div class="exercise-details">
                    ççœ¼30ç§’/ä¸ªï¼Œé—­çœ¼15ç§’/ä¸ªï¼Œ2-3ä¸ª/ç»„ï¼Œ2ç»„/å¤©<br>
                    <small style="color: #999;">è®­ç»ƒæ—¶åº”å®Œå…¨æ— ç—›ï¼Œç›®çš„åœ¨äºæ”¹å–„è‚Œè‚‰åŠŸèƒ½</small>
                </div>
            </div>
            
            <div class="exercise-item phase2">
                <div class="exercise-title">
                    <span>2. é å¢™é™è¹²</span>
                    <span class="phase-tag phase2">ç¬¬20å¤©èµ·</span>
                </div>
                <div class="exercise-details">
                    30-120ç§’/ä¸ªï¼Œ2-3ä¸ª/å¤©æˆ–éš”å¤©<br>
                    <small style="color: #999;">è®­ç»ƒæ—¶åº”å®Œå…¨æ— ç—›ï¼Œç›®çš„åœ¨äºæ”¹å–„è‚Œè‚‰åŠŸèƒ½</small>
                </div>
            </div>

            <div class="exercise-item phase2">
                <div class="exercise-title">
                    <span>3. åŒè…¿ä¸‹è¹²</span>
                    <span class="phase-tag phase2">ç¬¬20å¤©èµ·</span>
                </div>
                <div class="exercise-details">
                    10-20ä¸ª/ç»„ï¼Œ2-3ç»„/å¤©æˆ–éš”å¤©<br>
                    <small style="color: #999;">è®­ç»ƒæ—¶åº”å®Œå…¨æ— ç—›ï¼Œç›®çš„åœ¨äºæ”¹å–„è‚Œè‚‰åŠŸèƒ½</small>
                </div>
            </div>

            <div class="exercise-item phase2">
                <div class="exercise-title">
                    <span>4. å‰å‘å¼“æ­¥</span>
                    <span class="phase-tag phase2">ç¬¬20å¤©èµ·</span>
                </div>
                <div class="exercise-details">
                    10-20ä¸ª/ç»„ï¼Œ2-3ç»„/å¤©æˆ–éš”å¤©<br>
                    <small style="color: #999;">è®­ç»ƒæ—¶åº”å®Œå…¨æ— ç—›ï¼Œç›®çš„åœ¨äºæ”¹å–„è‚Œè‚‰åŠŸèƒ½</small>
                </div>
            </div>

            <div class="exercise-item phase2">
                <div class="exercise-title">
                    <span>5. åå‘å¼“æ­¥</span>
                    <span class="phase-tag phase2">ç¬¬20å¤©èµ·</span>
                </div>
                <div class="exercise-details">
                    10-20ä¸ª/ç»„ï¼Œ2-3ç»„/å¤©æˆ–éš”å¤©<br>
                    <small style="color: #999;">è®­ç»ƒæ—¶åº”å®Œå…¨æ— ç—›ï¼Œç›®çš„åœ¨äºæ”¹å–„è‚Œè‚‰åŠŸèƒ½</small>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-box phase1"></div>
                    <span>ç¬¬1-20å¤©</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box phase2"></div>
                    <span>ç¬¬20å¤©å¼€å§‹</span>
                </div>
            </div>

            <div class="note">
                âš ï¸ <strong>é‡è¦æç¤ºï¼š</strong>éœ€è¦è¿›è¡Œæ”¯å…·è°ƒèŠ‚ï¼Œæ— ç—›ä¸”é«˜è´¨é‡çš„è‚Œè‚‰åŠŸèƒ½è®­ç»ƒå¯ä»¥ä¿æŠ¤å¹¶ä¿ƒè¿›ç»„ç»‡ä¿®å¤ã€‚
            </div>
        </div>

        <div class="calendar-section">
            <div class="month-selector">
                <button onclick="changeMonth(-1)">â—€ ä¸Šæœˆ</button>
                <div class="month-title" id="monthTitle">2026å¹´2æœˆ</div>
                <button onclick="changeMonth(1)">ä¸‹æœˆ â–¶</button>
            </div>
            <div class="calendar-grid" id="calendar"></div>
        </div>

        <button class="reset-btn" onclick="resetProgress()">ğŸ”„ é‡ç½®åº·å¤è®¡åˆ’</button>
    </div>

    <script>
        // åˆå§‹åŒ–æ•°æ®
        let rehabData = JSON.parse(localStorage.getItem('rehabData')) || {
            startDate: new Date().toISOString().split('T')[0],
            checkins: [],
            notificationsEnabled: false,
            morningTime: '08:00',
            eveningTime: '19:00'
        };

        // å½“å‰æŸ¥çœ‹çš„æœˆä»½
        let viewingMonth = new Date();

        // ä¿å­˜æ•°æ®
        function saveData() {
            localStorage.setItem('rehabData', JSON.stringify(rehabData));
        }

        // è®¡ç®—ä»å¼€å§‹ç¬¬å‡ å¤©
        function getCurrentDay() {
            const start = new Date(rehabData.startDate);
            const today = new Date();
            start.setHours(0, 0, 0, 0);
            today.setHours(0, 0, 0, 0);
            const diffTime = today - start;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            return diffDays + 1;
        }

        // è·å–ä»Šå¤©æ—¥æœŸå­—ç¬¦ä¸²
        function getTodayString() {
            return new Date().toISOString().split('T')[0];
        }

        // ä»Šæ—¥æ‰“å¡
        function dailyCheckin() {
            const today = getTodayString();
            if (!rehabData.checkins.includes(today)) {
                rehabData.checkins.push(today);
                saveData();
                updateUI();
                alert('âœ… æ‰“å¡æˆåŠŸï¼åšæŒå°±æ˜¯èƒœåˆ©ï¼');
            } else {
                alert('ä»Šå¤©å·²ç»æ‰“å¡è¿‡äº†å“¦ï¼');
            }
        }

        // æ’¤é”€ä»Šæ—¥æ‰“å¡
        function undoCheckin() {
            const today = getTodayString();
            const index = rehabData.checkins.indexOf(today);
            if (index > -1) {
                if (confirm('ç¡®å®šè¦æ’¤é”€ä»Šå¤©çš„æ‰“å¡å—ï¼Ÿ')) {
                    rehabData.checkins.splice(index, 1);
                    saveData();
                    updateUI();
                }
            }
        }

        // æ£€æŸ¥ä»Šå¤©æ˜¯å¦æ‰“å¡
        function isTodayChecked() {
            return rehabData.checkins.includes(getTodayString());
        }

        // è®¡ç®—è¿ç»­å¤©æ•°
        function calculateStreak() {
            if (rehabData.checkins.length === 0) return 0;
            
            const sortedCheckins = [...rehabData.checkins].sort().reverse();
            let streak = 0;
            let currentDate = new Date();
            currentDate.setHours(0, 0, 0, 0);
            
            for (let checkin of sortedCheckins) {
                const checkinDate = new Date(checkin);
                checkinDate.setHours(0, 0, 0, 0);
                
                const expectedDate = new Date(currentDate);
                expectedDate.setDate(expectedDate.getDate() - streak);
                
                const diff = Math.floor((checkinDate - expectedDate) / (1000 * 60 * 60 * 24));
                
                if (diff === 0) {
                    streak++;
                } else if (diff < 0) {
                    break;
                }
            }
            
            return streak;
        }

        // æ›´æ–°UI
        function updateUI() {
            const dayNum = getCurrentDay();
            document.getElementById('dayNumber').textContent = dayNum;
            document.getElementById('totalCheckins').textContent = rehabData.checkins.length;
            document.getElementById('streak').textContent = calculateStreak();

            // æ›´æ–°æ‰“å¡æŒ‰é’®
            const checkinBtn = document.getElementById('checkinBtn');
            const undoBtn = document.getElementById('undoBtn');
            
            if (isTodayChecked()) {
                checkinBtn.classList.add('completed');
                checkinBtn.textContent = 'ä»Šæ—¥å·²æ‰“å¡ âœ“';
                undoBtn.disabled = false;
            } else {
                checkinBtn.classList.remove('completed');
                checkinBtn.textContent = 'ä»Šæ—¥è®­ç»ƒæ‰“å¡';
                undoBtn.disabled = true;
            }

            // æ›´æ–°æ—¥å†
            updateCalendar();
            updateNotificationStatus();
        }

        // åˆ‡æ¢æœˆä»½
        function changeMonth(delta) {
            viewingMonth.setMonth(viewingMonth.getMonth() + delta);
            updateCalendar();
        }

        // æ›´æ–°æ—¥å†
        function updateCalendar() {
            const calendar = document.getElementById('calendar');
            const monthTitle = document.getElementById('monthTitle');
            calendar.innerHTML = '';
            
            const year = viewingMonth.getFullYear();
            const month = viewingMonth.getMonth();
            
            monthTitle.textContent = `${year}å¹´${month + 1}æœˆ`;
            
            // æ·»åŠ æ˜ŸæœŸæ ‡é¢˜
            const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            weekdays.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-header';
                header.textContent = day;
                calendar.appendChild(header);
            });
            
            // è·å–æœ¬æœˆç¬¬ä¸€å¤©
            const firstDay = new Date(year, month, 1);
            const firstDayOfWeek = firstDay.getDay();
            
            // è·å–æœ¬æœˆå¤©æ•°
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // è·å–ä¸Šæœˆå¤©æ•°
            const prevMonthDays = new Date(year, month, 0).getDate();
            
            const today = new Date();
            const todayStr = today.toISOString().split('T')[0];
            
            // å¡«å……ä¸Šæœˆæ—¥æœŸ
            for (let i = firstDayOfWeek - 1; i >= 0; i--) {
                const cell = document.createElement('div');
                cell.className = 'calendar-day other-month';
                cell.textContent = prevMonthDays - i;
                calendar.appendChild(cell);
            }
            
            // å¡«å……æœ¬æœˆæ—¥æœŸ
            for (let day = 1; day <= daysInMonth; day++) {
                const cell = document.createElement('div');
                cell.className = 'calendar-day';
                cell.textContent = day;
                
                const date = new Date(year, month, day);
                const dateStr = date.toISOString().split('T')[0];
                
                // æ£€æŸ¥æ˜¯å¦æ‰“å¡
                if (rehabData.checkins.includes(dateStr)) {
                    cell.classList.add('checked');
                }
                
                // æ ‡è®°ä»Šå¤©
                if (dateStr === todayStr) {
                    cell.classList.add('today');
                }
                
                // ç‚¹å‡»æ—¥æœŸåˆ‡æ¢æ‰“å¡çŠ¶æ€
                cell.onclick = function() {
                    const index = rehabData.checkins.indexOf(dateStr);
                    if (index > -1) {
                        rehabData.checkins.splice(index, 1);
                    } else {
                        rehabData.checkins.push(dateStr);
                    }
                    saveData();
                    updateUI();
                };
                
                calendar.appendChild(cell);
            }
            
            // å¡«å……ä¸‹æœˆæ—¥æœŸ
            const totalCells = calendar.children.length - 7;
            const remainingCells = 42 - totalCells;
            for (let day = 1; day <= remainingCells; day++) {
                const cell = document.createElement('div');
                cell.className = 'calendar-day other-month';
                cell.textContent = day;
                calendar.appendChild(cell);
            }
        }

        // å¼€å¯é€šçŸ¥
        async function enableNotifications() {
            if (!('Notification' in window)) {
                alert('ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒé€šçŸ¥åŠŸèƒ½');
                return;
            }

            const permission = await Notification.requestPermission();
            
            if (permission === 'granted') {
                rehabData.notificationsEnabled = true;
                rehabData.morningTime = document.getElementById('morningTime').value;
                rehabData.eveningTime = document.getElementById('eveningTime').value;
                saveData();
                updateNotificationStatus();
                scheduleNotifications();
                
                new Notification('ğŸ‰ é€šçŸ¥å·²å¼€å¯', {
                    body: `ä¼šåœ¨${rehabData.morningTime}å’Œ${rehabData.eveningTime}æé†’ä½ è®­ç»ƒ`,
                });
            } else {
                alert('éœ€è¦å…è®¸é€šçŸ¥æƒé™æ‰èƒ½æé†’ä½ å“¦');
            }
        }

        // æ›´æ–°é€šçŸ¥çŠ¶æ€
        function updateNotificationStatus() {
            const statusDiv = document.getElementById('notificationStatus');
            
            if (rehabData.notificationsEnabled) {
                statusDiv.classList.add('enabled');
                statusDiv.querySelector('p').textContent = 'âœ… é€šçŸ¥å·²å¼€å¯';
                
                document.getElementById('morningTime').value = rehabData.morningTime;
                document.getElementById('eveningTime').value = rehabData.eveningTime;
                
                document.getElementById('morningTime').onchange = function() {
                    rehabData.morningTime = this.value;
                    saveData();
                };
                document.getElementById('eveningTime').onchange = function() {
                    rehabData.eveningTime = this.value;
                    saveData();
                };
            }
        }

        // å®‰æ’é€šçŸ¥
        function scheduleNotifications() {
            if (!rehabData.notificationsEnabled) return;

            setInterval(() => {
                const now = new Date();
                const currentTime = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
                
                if (!isTodayChecked()) {
                    if (currentTime === rehabData.morningTime) {
                        new Notification('ğŸŒ… æ—©ä¸Šè®­ç»ƒæ—¶é—´åˆ°äº†ï¼', {
                            body: 'è¯¥åšåº·å¤è®­ç»ƒäº†ï¼ŒåšæŒå°±æ˜¯èƒœåˆ©ï¼',
                            requireInteraction: true
                        });
                    }
                    
                    if (currentTime === rehabData.eveningTime) {
                        new Notification('ğŸŒ™ æ™šä¸Šè®­ç»ƒæ—¶é—´åˆ°äº†ï¼', {
                            body: 'åˆ«å¿˜äº†ä»Šå¤©çš„åº·å¤è®­ç»ƒå“¦ï¼',
                            requireInteraction: true
                        });
                    }
                }
            }, 60000);
        }

        // é‡ç½®è¿›åº¦
        function resetProgress() {
            if (confirm('ç¡®å®šè¦é‡ç½®åº·å¤è®¡åˆ’å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰æ‰“å¡è®°å½•ï¼Œä»ç¬¬1å¤©é‡æ–°å¼€å§‹ã€‚')) {
                rehabData = {
                    startDate: new Date().toISOString().split('T')[0],
                    checkins: [],
                    notificationsEnabled: rehabData.notificationsEnabled,
                    morningTime: rehabData.morningTime,
                    eveningTime: rehabData.eveningTime
                };
                saveData();
                viewingMonth = new Date();
                updateUI();
                alert('åº·å¤è®¡åˆ’å·²é‡ç½®ï¼Œä»ç¬¬1å¤©å¼€å§‹ï¼');
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            updateUI();
            if (rehabData.notificationsEnabled) {
                scheduleNotifications();
            }
        };
    </script>
</body>
</html>